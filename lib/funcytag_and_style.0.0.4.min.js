/* FuncyTag and FuncyStyle (combined) version 0.0.4 - see more at https://github.com/BrentNoorda/FuncyTag */
(function(n){function F(a){return a.replace(G,function(a,d,c,e){return"-"+d.toLowerCase()})}function z(a){return null!==a&&"object"===typeof a?"undefined"===typeof a.push?!1:!0:!1}function H(a){return"object"===typeof a&&a.constructor===Object&&!("_ft_render_"in a)}function p(a){this._=a}function q(a){var b,d,c,e=1;3<=arguments.length?(d=arguments[0],c=arguments[1],b=arguments[2],4<=arguments.length&&(e=arguments[3])):(2===arguments.length&&(e=arguments[1]),b=arguments[0],"string"===typeof b||b instanceof
String?(4===b.length&&(b="#"+b.substring(1,2)+b.substring(1,2)+b.substring(2,3)+b.substring(2,3)+b.substring(3,4)+b.substring(3,4)),d=parseInt(b.substring(1,3),16),c=parseInt(b.substring(3,5),16),b=parseInt(b.substring(5,7),16)):(d=(b&16711680)>>16,c=(b&65280)>>8,b&=255));0>d&&(d=0);0>c&&(c=0);0>b&&(b=0);255<d&&(d=255);255<c&&(c=255);255<b&&(b=255);0>e&&(e=0);1<e&&(e=1);return new p({r:d,g:c,b:b,a:e})}function u(a,b){var d,c,e,l,m,f,g,C,I;m={_nested:[]};for(c=1;c<arguments.length;c++)for(f=arguments[c],
z(f)||(f=[f]),e=0;e<f.length;e++)if(l=f[e],null!=l)if("_fs_selector"in l)for(C in l)m[C]=l.properties[C];else for(d in l)g=l[d],null!=g&&(H(g)?m._nested.push([d,g]):m[d]=g);m._fs_selector=a;m._fs_render_=function(a){var b,d,c,e,f;a=(a?a+" ":"")+m._fs_selector;b=a+" {\r\n";for(d in this)if(e=d.indexOf("_"),0!==e){c=this[d];-1===e?f="":(e=d.lastIndexOf("_"),f=d.substring(e+1),d=d.substring(0,e),"pct"===f&&(f="%"));if(z(c)){for(e=0;e<c.length;e++)null==c[e]&&(c.splice(e,1),e--);if(0===c.length)continue;
c=c.join(f+" ")}c+=f;b+="  "+F(d)+": "+c+";\r\n"}b+="}";A++;for(c=0;c<this._nested.length;c++)d=this._nested[c][0],g=this._nested[c][1],d=0===d.lastIndexOf("&",0)?d.substring(1):" "+d,I=u(a+d,g),b+="\r\n"+I._fs_render_(null);A--;return b};if(0===A)try{n.funcyTag._styles_not_injected.push(m)}catch(M){}return m}function L(){function a(b){var c=!0,e;0===b?c=!1:(e=v.charAt(b-1),"z"===e?(e="a",c=a(b-1)):e=String.fromCharCode(e.charCodeAt(0)+1),v=v.substring(0,b-1)+e);return c}var b=v+x+"-ft-unq";"z"===
x?(a(D)||(D++,v+="a"),x="a"):x=String.fromCharCode(x.charCodeAt(0)+1);return b}function J(){function a(b,a){return function(d){a.call(b,document.getElementById(b.id),d||n.event)}}var b,d,c,e,l;r=null;for(b in s)if(d=document.getElementById(b),null!==d){c=t[b]=s[b];delete s[b];for(e in c)0===e.lastIndexOf("on",0)&&"oninit"!==e&&"onterm"!==e&&(l=c[e],d.addEventListener?d.addEventListener(e.substring(2),a(c,l),!1):d.attachEvent(e,a(c,l)));"oninit"in c&&c.oninit.call(c,d)}if(null===r)for(b in s){try{console.log("RERENDER because something not ready yet")}catch(m){}r=
setTimeout(J,0)}}function E(a,b){var d=t[a];delete t[a];"onterm"in d&&d.onterm.call(d,b)}function K(){var a,b;y=null;for(a in t)b=document.getElementById(a),null===b&&E(a,!1);y=setTimeout(K,1E3)}function w(a,b){var d,c;try{if("_ft_name"in a&&(d=a._ft_name,void 0!==a.default_attributes))for(c in b=b||{},b._superAttr=a.default_attributes,a.default_attributes)c in b||(b[c]=a.default_attributes[c])}catch(e){d=a}c=function(a){var c,e,g;g=H(a);c={_ft_name:d,_insides:[],_attributes:g?a:{}};if(void 0!==b){c._attributes=
{_superAttr:b};for(e in b)c._attributes[e]=b[e];if(g)for(e in a)c._attributes[e]=a[e]}for(e=g?1:0;e<arguments.length;e++)g=arguments[e],c._insides.push(g);c._ft_render_=function(b){var a,d,c,e,k,h,f,g;e=!1;k=null;for(c="";0!==B.length;)a=B.shift(),0!==c.length&&(c+="\r\n"),c+=u.getText(a);0!==c.length&&u.injectStyle(c);g="";a="<"+this._ft_name;for(d in this._attributes)if(c=d.indexOf("_"),0!==c&&(h=this._attributes[d],null!=h))if(-1===c?f="":(c=d.lastIndexOf("_"),f=d.substring(c+1),d=d.substring(0,
c),"pct"===f&&(f="%")),0===d.lastIndexOf("on",0))e=!0;else{if(z(h)){for(c=0;c<h.length;c++)null==h[c]&&(h.splice(c,1),c--);if(0===h.length)continue;h=h.join(f+" ")}h+=f;0===d.lastIndexOf("css",0)?g+=F(d).substring(4)+":"+h+";":(a+=" "+d+'="'+h+'"',"id"===d&&(k=h))}this._attributes._nobrout||(a=b+a);0!==b.length||this._attributes._nobrin||(b="\r\n");0!==g.length&&(a+=' style="'+g+'"');if(e){null===k&&(k=L(),this._attributes.id=k,a+=' id="'+k+'"');if(k in s)try{console.warning('FuncyTags adding id "'+
k+'" when previous "'+k+'" has not initialized yet.')}catch(l){}k in t&&E(k,!1);s[k]=this._attributes;null===r&&(r=setTimeout(J,0))}h="";g=this._attributes._nobrin?"":b+"  ";f=!1;for(d=0;d<this._insides.length;d++)for(k=this._insides[d],z(k)||(k=[k]),c=0;c<k.length;c++)if(e=k[c],null!=e)try{h+=e._ft_render_(f?"":g),f=e._attributes._nobrout}catch(m){f?f=!1:h+=g,h+=String(e)}return a=0!==h.length||this._attributes._noslfcls?a+(">"+h+(this._attributes._nobrin?"":b)+"</"+this._ft_name+">"):a+"/>"};c.toString=
function(){return this._ft_render_("")};c.createElement=function(){return w.createElement(this)};return c};c._ft_name=d;c.default_attributes=b;return c}var G,v,D,x,s,t,y,r,B,A;G=RegExp("([A-Z])","g");p.prototype.mix=function(a,b){var d=1-b;return q(Math.round(this._.r*b+a._.r*d),Math.round(this._.g*b+a._.g*d),Math.round(this._.b*b+a._.b*d),Math.round(this._.a*b+a._.a*d))};p.prototype.add=function(a){return q(this._.r+a._.r,this._.g+a._.g,this._.b+a._.b,(this._.a+a._.a)/2)};p.prototype.sub=function(a){return q(this._.r-
a._.r,this._.g-a._.g,this._.b-a._.b,(this._.a+a._.a)/2)};p.prototype.toString=function(){function a(a){return 16>a?"0"+a.toString(16):a.toString(16)}return 1<=this._.a?"#"+a(this._.r)+a(this._.g)+a(this._.b):"rgba("+this._.r+","+this._.g+","+this._.b+","+this._.a+")"};p.prototype.r=function(a){return arguments.length?q(a,this._.g,this._.b,this._.a):this._.r};p.prototype.g=function(a){return arguments.length?q(this._.r,a,this._.b,this._.a):this._.g};p.prototype.b=function(a){return arguments.length?
q(this._.r,this._.g,a,this._.a):this._.b};p.prototype.a=function(a){return arguments.length?q(this._.r,this._.g,this._.b,a):this._.a};A=0;n.funcyStyle=u;u.color=q;u.getText=function(a){return a._fs_render_(null)};u.injectStyle=function(a){var b,d,c=null,e;try{b=a._fs_render_(null);c="-fs-"+a._fs_selector;(d=document.getElementById(c))&&d.parentNode.removeChild(d);try{e=n.funcyTag._styles_not_injected.indexOf(a),n.funcyTag._styles_not_injected.splice(e,1)}catch(l){}}catch(m){b=String(a)}try{console.log("INJECT CSS:\r\n"+
b)}catch(f){}d=document.createElement("style");d.setAttribute("type","text/css");null!==c&&d.setAttribute("id",c);d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(d)};v="";D=0;x="a";s={};t={};y=r=null;setTimeout(K,1E3);(function(){function a(){var a;null!==r&&(clearTimeout(r),r=null);null!==y&&(clearTimeout(y),y=null);for(a in t)E(a,!0)}n.addEventListener?n.addEventListener("unload",a,!1):n.attachEvent("onunload",a)})();
B=[];n.funcyTag=w;w._styles_not_injected=B;w.color=q;w.esc=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};w.createElement=function(a){var b=document.createElement("div");b.innerHTML=a.toString();return b.firstChild};w.debugTrackers=function(){var a,b,d;d="FuncyTag debug trackers\r\n\r\ngInitQueue items:\r\n";b=0;for(a in s)b++,d+=" "+a+"\r\n";d=d+("Total gInitQueue items: "+b+"\r\n")+"\r\n\r\ngElems items:\r\n";b=0;for(a in t)b++,d+=" "+
a+"\r\n";return d+="Total gElems items: "+b+"\r\n"}})(window);